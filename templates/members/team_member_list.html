{% extends 'base.html' %}

{% load user_extras %}

{% block title %}部員・マネージャー一覧{% endblock title %}

{% block content %}
<h2 class="my-4">部員・マネージャー一覧</h2>

<!-- 新規登録ボタン -->
<div class="mt-3">
    <a href="{% url 'members:team_member_new' %}" class="btn btn-primary mb-3">新規部員・マネージャー登録</a>
</div>

<!-- 部員リストテーブル -->
{% if object_list %}
<div class="table-responsive">
    <table class="table table-bordered table-striped align-middle">
        <thead class="table-light">
            <tr>
                <th>名前</th>
                <th>メールアドレス</th>
                <th>ロール</th>
                <th>学年</th>
                <th>在籍状態</th>
            </tr>
        </thead>
        <tbody>
            {% for user in object_list %}
            <tr>
                <td>{{ user|display_name }}</td>
                <td>{{ user.email }}</td>
                <td>
                    {% if user.role == "player" %}部員
                    {% elif user.role == "manager" %}マネージャー
                    {% else %}{{ user.role }}
                    {% endif %}
                </td>
                <td>{{ user.grade|default:"-" }}</td>
                <td>
                    {% if user.status == "active" %}在籍中
                    {% elif user.status == "retired" %}退部
                    {% else %}{{ user.status }}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p>登録された部員・マネージャーがいません。</p>
{% endif %}

{% endblock content %}